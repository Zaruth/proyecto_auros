{% extends 'base.html.twig' %}

{% block title %}Thread{% endblock %}

{% block body %}
    <h1>Thread</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ thread.id }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ thread.title }}</td>
            </tr>
            <tr>
                <th>Category</th>
                <td>{{ thread.category }}</td>
            </tr>
            <tr>
                <th>Date</th>
                <td>{{ thread.date ? thread.date|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
        </tbody>
    </table>
    <table>
    {% for post in thread.posts %}
            <tr>
                <td>{{ post.id }}</td>
                <td>{{ post.text }}</td>
                <td>{{ post.cpost.lastname }}</td>
                <td>{{ post.date ? thread.date|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
    {% else %}
            <tr>
                <td colspan="5">Sin mensajes</td>
            </tr>
    {% endfor %}
    </table>
    <form action="{{ path('post_new', {'id': thread.id}) }}">
        <p>Mensaje: </p>
        <textarea class="form-control" name="mensaje" placeholder="Mensaje" required="required"></textarea>
        <button class="btn" type="submit">Publicar</button>
    </form>
    <a href="{{ path('thread_index') }}">back to list</a>

    <a href="{{ path('thread_edit', {'id': thread.id}) }}">edit</a>

    {{ include('thread/_delete_form.html.twig') }}
{% endblock %}